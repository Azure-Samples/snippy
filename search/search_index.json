{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Snippy Lab - Build an AI-Powered Code Snippet Manager","text":"<p>Welcome! This hands-on lab teaches you to build Snippy, an intelligent code snippet manager using Azure Functions, Azure OpenAI, and the Model Context Protocol (MCP).</p>"},{"location":"#what-youll-build","title":"What You'll Build","text":"<ul> <li>Serverless API with Azure Functions for saving/retrieving code snippets</li> <li>Vector Search using Azure OpenAI embeddings and Cosmos DB</li> <li>MCP Tools that GitHub Copilot can discover and use</li> <li>AI Agents that generate documentation and style guides from your code</li> <li>Multi-Agent Orchestration using Durable Functions</li> </ul>"},{"location":"#prerequisites","title":"Prerequisites","text":"<p>Before starting, ensure you have:</p>"},{"location":"#required-software","title":"Required Software","text":"<ul> <li>Visual Studio Code - Download</li> <li>Python 3.11+ - Download</li> <li>Git - Download</li> <li>Azure CLI - Install</li> <li>Azure Functions Core Tools v4 - Install</li> <li>Azure Developer CLI (azd) - Install</li> <li>Docker Desktop - Download</li> </ul>"},{"location":"#recommended","title":"Recommended","text":"<ul> <li>uv package manager (faster than pip) - Install</li> <li>REST Client Extension for VS Code - Install</li> </ul>"},{"location":"#required-accounts","title":"Required Accounts","text":"<ul> <li>Azure Subscription - Create free account</li> <li>GitHub Account with Copilot - GitHub Copilot</li> </ul>"},{"location":"#quick-start","title":"Quick Start","text":"<ol> <li> <p>Clone this repository <pre><code>git clone https://github.com/Azure-Samples/snippy.git\ncd snippy\n</code></pre></p> </li> <li> <p>Follow the tutorial</p> </li> <li>Open TUTORIAL.md for step-by-step instructions</li> <li> <p>Refer to TROUBLESHOOTING.md if you encounter issues</p> </li> <li> <p>Clean up when done <pre><code>azd down --purge --force\n</code></pre></p> </li> </ol>"},{"location":"#what-youll-learn","title":"What You'll Learn","text":"<ul> <li>Azure Functions as an AI integration platform</li> <li>Model Context Protocol (MCP) for AI assistant integration</li> <li>Vector embeddings and semantic search with RAG patterns</li> <li>Microsoft Agent Framework for building AI agents</li> <li>Durable Functions for multi-agent orchestration</li> <li>Azure OpenAI integration with embeddings and chat models</li> </ul>"},{"location":"#support","title":"Support","text":"<ul> <li>Issues: Found a bug? Open an issue</li> <li>Questions: Check TROUBLESHOOTING.md first</li> <li>Discussions: GitHub Discussions</li> </ul>"},{"location":"#license","title":"License","text":"<p>This project is licensed under the MIT License - see the LICENSE.md file for details.</p>"},{"location":"QUICK_REFERENCE/","title":"Quick Reference","text":"<p>Essential commands and tips for working with Snippy.</p>"},{"location":"QUICK_REFERENCE/#setup-commands","title":"Setup Commands","text":""},{"location":"QUICK_REFERENCE/#initial-setup","title":"Initial Setup","text":"<pre><code># Clone the repository\ngit clone https://github.com/Azure-Samples/snippy.git\ncd snippy\n\n# Login to Azure\naz login\n\n# Login to Azure Developer CLI\nazd auth login\n</code></pre>"},{"location":"QUICK_REFERENCE/#create-environment","title":"Create Environment","text":"<pre><code># Create a unique azd environment\nazd env new snippymcplab-&lt;unique-suffix&gt; --subscription &lt;your-subscription-id&gt;\n\n# Set name suffix\nazd env set NAME_SUFFIX &lt;unique-suffix&gt;\n\n# Provision Azure resources (takes 5-10 minutes)\nazd provision\n</code></pre>"},{"location":"QUICK_REFERENCE/#python-setup","title":"Python Setup","text":"<pre><code># Navigate to src directory\ncd src\n\n# Create virtual environment with uv\nuv venv .venv\n\n# Activate virtual environment\nsource .venv/bin/activate  # macOS/Linux\n.venv\\Scripts\\Activate.ps1  # Windows PowerShell\n.venv\\Scripts\\activate.bat  # Windows CMD\n\n# Install dependencies\nuv pip install -r requirements.txt\n</code></pre>"},{"location":"QUICK_REFERENCE/#start-local-development","title":"Start Local Development","text":"<pre><code># Start Docker services (from root directory)\ndocker compose up -d\n\n# Start Functions host (from src directory)\ncd src\nfunc start\n</code></pre>"},{"location":"QUICK_REFERENCE/#common-tasks","title":"Common Tasks","text":""},{"location":"QUICK_REFERENCE/#regenerate-settings","title":"Regenerate Settings","text":"<pre><code># From repository root\n./scripts/generate-settings.sh  # macOS/Linux\n.\\scripts\\generate-settings.ps1  # Windows\n</code></pre>"},{"location":"QUICK_REFERENCE/#deploy-to-azure","title":"Deploy to Azure","text":"<pre><code># From repository root\nazd deploy\n</code></pre>"},{"location":"QUICK_REFERENCE/#get-function-app-details","title":"Get Function App Details","text":"<pre><code># Get function app name\nazd env get-value AZURE_FUNCTION_NAME\n\n# Get resource group\nazd env get-value AZURE_RESOURCE_GROUP\n\n# Get MCP system key\naz functionapp keys list \\\n  -n $(azd env get-value AZURE_FUNCTION_NAME) \\\n  -g $(azd env get-value AZURE_RESOURCE_GROUP) \\\n  --query \"systemKeys.mcp_extension\" \\\n  --output tsv\n</code></pre>"},{"location":"QUICK_REFERENCE/#view-logs","title":"View Logs","text":"<pre><code># Local function logs\n# (visible in terminal where `func start` is running)\n\n# Docker container logs\ndocker compose logs\n\n# Azure function logs\nfunc azure functionapp logstream &lt;function-app-name&gt;\n</code></pre>"},{"location":"QUICK_REFERENCE/#mcp-configuration","title":"MCP Configuration","text":""},{"location":"QUICK_REFERENCE/#local-mcp-server","title":"Local MCP Server","text":"<p>In <code>.vscode/mcp.json</code>:</p> <pre><code>{\n  \"mcpServers\": {\n    \"local-snippy\": {\n      \"type\": \"sse\",\n      \"url\": \"http://localhost:7071/runtime/webhooks/mcp\"\n    }\n  }\n}\n</code></pre>"},{"location":"QUICK_REFERENCE/#remote-mcp-server","title":"Remote MCP Server","text":"<p>After deployment, update <code>.vscode/mcp.json</code>:</p> <pre><code>{\n  \"mcpServers\": {\n    \"remote-snippy\": {\n      \"type\": \"sse\",\n      \"url\": \"https://&lt;function-app-name&gt;.azurewebsites.net/runtime/webhooks/mcp\",\n      \"headers\": {\n        \"x-functions-key\": \"&lt;mcp-system-key&gt;\"\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"QUICK_REFERENCE/#copilot-commands","title":"Copilot Commands","text":""},{"location":"QUICK_REFERENCE/#using-mcp-tools","title":"Using MCP Tools","text":"<pre><code># Save a snippet\n#local-snippy save this snippet as my-snippet-name\n\n# Retrieve a snippet\n#local-snippy get the snippet named my-snippet-name\n\n# Generate documentation\n#local-snippy generate a deep wiki for all snippets\n\n# Create style guide\n#local-snippy create a code style guide based on saved snippets\n\n# Multi-agent orchestration\n#local-snippy generate comprehensive documentation\n</code></pre>"},{"location":"QUICK_REFERENCE/#testing-endpoints","title":"Testing Endpoints","text":""},{"location":"QUICK_REFERENCE/#using-vs-code-rest-client","title":"Using VS Code REST Client","text":"<p>Open <code>src/tests/test.http</code> and click \"Send Request\" above any request.</p>"},{"location":"QUICK_REFERENCE/#using-curl","title":"Using curl","text":"<pre><code># Save a snippet\ncurl -X POST http://localhost:7071/api/snippets \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"name\":\"test\",\"code\":\"print(\\\"hello\\\")\",\"projectId\":\"default\"}'\n\n# Get a snippet\ncurl http://localhost:7071/api/snippets/test\n</code></pre>"},{"location":"QUICK_REFERENCE/#troubleshooting-quick-fixes","title":"Troubleshooting Quick Fixes","text":""},{"location":"QUICK_REFERENCE/#port-already-in-use","title":"Port Already in Use","text":"<pre><code># Kill process on port 7071\nlsof -ti:7071 | xargs kill -9  # macOS/Linux\nGet-Process -Id (Get-NetTCPConnection -LocalPort 7071).OwningProcess | Stop-Process  # Windows\n</code></pre>"},{"location":"QUICK_REFERENCE/#docker-not-running","title":"Docker Not Running","text":"<pre><code># Check Docker status\ndocker ps\n\n# Restart Docker Desktop app if needed\n</code></pre>"},{"location":"QUICK_REFERENCE/#virtual-environment-issues","title":"Virtual Environment Issues","text":"<pre><code># Deactivate and recreate\ndeactivate\nrm -rf .venv\nuv venv .venv\nsource .venv/bin/activate  # or Windows equivalent\nuv pip install -r requirements.txt\n</code></pre>"},{"location":"QUICK_REFERENCE/#mcp-not-connecting","title":"MCP Not Connecting","text":"<ol> <li>Command Palette \u2192 <code>MCP Tools: Reset Cached Tools</code></li> <li>Restart VS Code</li> <li>Check <code>.vscode/mcp.json</code> configuration</li> <li>View logs: Command Palette \u2192 <code>MCP: List Servers</code> \u2192 Show Output</li> </ol>"},{"location":"QUICK_REFERENCE/#cleanup","title":"Cleanup","text":""},{"location":"QUICK_REFERENCE/#full-cleanup","title":"Full Cleanup","text":"<pre><code># Delete all Azure resources\nazd down --purge --force\n\n# Stop Docker containers\ndocker compose down -v\n\n# Remove local config\nrm -rf .azure\n</code></pre>"},{"location":"QUICK_REFERENCE/#verify-cleanup","title":"Verify Cleanup","text":"<pre><code># Check resource group is deleted\naz group list --output table\n\n# Check Docker containers stopped\ndocker ps\n</code></pre>"},{"location":"QUICK_REFERENCE/#useful-links","title":"Useful Links","text":"<ul> <li>Azure Portal: https://portal.azure.com</li> <li>Microsoft Foundry: https://ai.azure.com</li> <li>MCP Inspector: <code>npx @modelcontextprotocol/inspector</code></li> <li>DTS Dashboard (local): http://localhost:8082</li> <li>Azurite Blob Storage (local): http://127.0.0.1:10000</li> </ul>"},{"location":"QUICK_REFERENCE/#file-locations","title":"File Locations","text":"<ul> <li>Function code: <code>src/function_app.py</code></li> <li>Agent code: <code>src/durable_agents.py</code></li> <li>Tools: <code>src/tools/vector_search.py</code></li> <li>Settings: <code>src/local.settings.json</code></li> <li>MCP config: <code>.vscode/mcp.json</code></li> <li>Docker config: <code>docker-compose.yml</code></li> <li>Infrastructure: <code>infra/main.bicep</code></li> </ul>"},{"location":"QUICK_REFERENCE/#next-steps","title":"Next Steps","text":"<ol> <li>Complete the tutorial: See TUTORIAL.md</li> <li>Having issues?: Check TROUBLESHOOTING.md</li> </ol>"},{"location":"TROUBLESHOOTING/","title":"Troubleshooting Guide","text":"<p>This guide covers common issues you might encounter while working through the Snippy lab.</p>"},{"location":"TROUBLESHOOTING/#azure-cli-authentication","title":"Azure CLI &amp; Authentication","text":""},{"location":"TROUBLESHOOTING/#issue-az-login-fails-or-times-out","title":"Issue: <code>az login</code> fails or times out","text":"<p>Solution: <pre><code># Try device code authentication instead\naz login --use-device-code\n</code></pre></p>"},{"location":"TROUBLESHOOTING/#issue-no-subscriptions-found","title":"Issue: \"No subscriptions found\"","text":"<p>Solution: <pre><code># List all available subscriptions\naz account list --output table\n\n# Set a specific subscription\naz account set --subscription \"&lt;subscription-id&gt;\"\n</code></pre></p>"},{"location":"TROUBLESHOOTING/#issue-insufficient-permissions-to-create-resources","title":"Issue: Insufficient permissions to create resources","text":"<p>Solution: - Ensure you have Contributor or Owner role on the subscription - Contact your Azure administrator if you're using a company subscription</p>"},{"location":"TROUBLESHOOTING/#azure-developer-cli-azd","title":"Azure Developer CLI (azd)","text":""},{"location":"TROUBLESHOOTING/#issue-azd-provision-fails-with-region-errors","title":"Issue: <code>azd provision</code> fails with region errors","text":"<p>Solution: <pre><code># Try a different Azure region\nazd env set AZURE_LOCATION eastus\n\n# Or use the region selector script\n./scripts/randomize-region.sh  # macOS/Linux\n.\\scripts\\randomize-region.ps1  # Windows PowerShell\n</code></pre></p>"},{"location":"TROUBLESHOOTING/#issue-resource-names-already-taken","title":"Issue: Resource names already taken","text":"<p>Solution: <pre><code># Use a different name suffix\nazd env set NAME_SUFFIX &lt;new-unique-suffix&gt;\n\n# Example: your initials + date\nazd env set NAME_SUFFIX jd1120\n</code></pre></p>"},{"location":"TROUBLESHOOTING/#issue-azd-deploy-fails","title":"Issue: <code>azd deploy</code> fails","text":"<p>Solution: <pre><code># Verify environment is set up correctly\nazd env list\n\n# Re-run deployment\nazd deploy\n\n# If still failing, try provisioning and deploying together\nazd up\n</code></pre></p>"},{"location":"TROUBLESHOOTING/#python-virtual-environments","title":"Python &amp; Virtual Environments","text":""},{"location":"TROUBLESHOOTING/#issue-uv-command-not-found","title":"Issue: <code>uv</code> command not found","text":"<p>Solution: Use <code>pip</code> instead: <pre><code># Create virtual environment\npython -m venv .venv\n\n# Activate (macOS/Linux)\nsource .venv/bin/activate\n\n# Activate (Windows PowerShell)\n.venv\\Scripts\\Activate.ps1\n\n# Activate (Windows Command Prompt)\n.venv\\Scripts\\activate.bat\n\n# Install dependencies\npip install -r requirements.txt\n</code></pre></p>"},{"location":"TROUBLESHOOTING/#issue-python-version-mismatch","title":"Issue: Python version mismatch","text":"<p>Solution: <pre><code># Check your Python version\npython --version\n\n# Must be 3.11 or higher\n# If not, install Python 3.11+ and use:\npython3.11 -m venv .venv\n</code></pre></p>"},{"location":"TROUBLESHOOTING/#issue-virtual-environment-wont-activate","title":"Issue: Virtual environment won't activate","text":"<p>Solution (Windows PowerShell): <pre><code># Enable script execution\nSet-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser\n</code></pre></p> <p>Solution (macOS/Linux): <pre><code># Ensure script has execute permissions\nchmod +x .venv/bin/activate\n</code></pre></p>"},{"location":"TROUBLESHOOTING/#azure-functions","title":"Azure Functions","text":""},{"location":"TROUBLESHOOTING/#issue-func-start-fails-port-7071-already-in-use","title":"Issue: <code>func start</code> fails - Port 7071 already in use","text":"<p>Solution: <pre><code># Find and stop the process using port 7071\n# macOS/Linux\nlsof -ti:7071 | xargs kill -9\n\n# Windows PowerShell\nGet-Process -Id (Get-NetTCPConnection -LocalPort 7071).OwningProcess | Stop-Process -Force\n\n# Or use a different port\nfunc start --port 7072\n</code></pre></p>"},{"location":"TROUBLESHOOTING/#issue-functions-host-wont-start-missing-settings","title":"Issue: Functions host won't start - missing settings","text":"<p>Solution: <pre><code># Ensure local.settings.json exists\ncd src\nls local.settings.json\n\n# If missing, regenerate it\ncd ..\n./scripts/generate-settings.sh  # macOS/Linux\n.\\scripts\\generate-settings.ps1  # Windows\n</code></pre></p>"},{"location":"TROUBLESHOOTING/#issue-cannot-find-module-azurefunctions","title":"Issue: \"Cannot find module 'azure.functions'\"","text":"<p>Solution: <pre><code># Ensure virtual environment is activated (you should see (.venv) in prompt)\n# Then reinstall dependencies\npip install -r requirements.txt\n</code></pre></p>"},{"location":"TROUBLESHOOTING/#docker","title":"Docker","text":""},{"location":"TROUBLESHOOTING/#issue-docker-daemon-not-running","title":"Issue: Docker daemon not running","text":"<p>Solution: - Start Docker Desktop application - Wait for it to fully start (whale icon in system tray should be steady) - Retry: <code>docker compose up -d</code></p>"},{"location":"TROUBLESHOOTING/#issue-docker-compose-up-fails-with-network-errors","title":"Issue: <code>docker compose up</code> fails with network errors","text":"<p>Solution: <pre><code># Stop any existing containers\ndocker compose down\n\n# Remove networks\ndocker network prune -f\n\n# Restart\ndocker compose up -d\n</code></pre></p>"},{"location":"TROUBLESHOOTING/#issue-azurite-or-dts-emulator-not-starting","title":"Issue: Azurite or DTS emulator not starting","text":"<p>Solution: <pre><code># Check container status\ndocker compose ps\n\n# View logs\ndocker compose logs\n\n# Restart specific service\ndocker compose restart azurite\ndocker compose restart durable-task-emulator\n</code></pre></p>"},{"location":"TROUBLESHOOTING/#mcp-model-context-protocol","title":"MCP (Model Context Protocol)","text":""},{"location":"TROUBLESHOOTING/#issue-mcp-server-not-connecting-in-vs-code","title":"Issue: MCP server not connecting in VS Code","text":"<p>Solution 1 - Reset cache: 1. Open Command Palette (<code>Ctrl+Shift+P</code> / <code>Cmd+Shift+P</code>) 2. Run: <code>MCP Tools: Reset Cached Tools</code></p> <p>Solution 2 - Check configuration: 1. Open <code>.vscode/mcp.json</code> 2. Verify the configuration is correct 3. Click \"Start\" button in the file</p> <p>Solution 3 - Check logs: 1. Command Palette \u2192 <code>MCP: List Servers</code> 2. Select your server 3. Click \"Show Output\" 4. Look for error messages</p>"},{"location":"TROUBLESHOOTING/#issue-mcp-tools-not-showing-in-copilot","title":"Issue: MCP tools not showing in Copilot","text":"<p>Solution: 1. Open Copilot Chat (<code>Ctrl+Alt+I</code>) 2. Enable Agent mode (dropdown or <code>Ctrl+.</code>) 3. Click Tools icon at bottom of chat 4. Verify MCP server and tools are checked 5. Click OK</p>"},{"location":"TROUBLESHOOTING/#issue-organization-policy-blocks-mcp-servers","title":"Issue: Organization policy blocks MCP servers","text":"<p>Solution - Use MCP Inspector: <pre><code># Run inspector locally\nnpx @modelcontextprotocol/inspector\n\n# Open browser to http://localhost:6274\n# Connect to your MCP server there\n</code></pre></p>"},{"location":"TROUBLESHOOTING/#github-copilot","title":"GitHub Copilot","text":""},{"location":"TROUBLESHOOTING/#issue-not-signed-in-to-github-copilot","title":"Issue: Not signed in to GitHub Copilot","text":"<p>Solution: 1. Click account icon (bottom-left of VS Code) 2. Select \"Sign in to use AI Features\" 3. Choose \"Continue with GitHub\" 4. Authorize VS Code</p>"},{"location":"TROUBLESHOOTING/#issue-copilot-not-using-claude-sonnet-45","title":"Issue: Copilot not using Claude Sonnet 4.5","text":"<p>Solution: 1. Open Copilot Chat 2. Click model selector dropdown 3. Select \"Claude Sonnet 4.5\"</p>"},{"location":"TROUBLESHOOTING/#cosmos-db","title":"Cosmos DB","text":""},{"location":"TROUBLESHOOTING/#issue-vector-search-queries-returning-no-results","title":"Issue: Vector search queries returning no results","text":"<p>Solution: 1. Verify embeddings were generated (check Function logs) 2. Ensure you saved snippets in the same project 3. Check container has vector policy configured:    <pre><code># View Cosmos DB in Azure Portal\n# Navigate to Data Explorer \u2192 snippets container \u2192 Settings\n# Verify vector embedding policy exists\n</code></pre></p>"},{"location":"TROUBLESHOOTING/#network-connectivity","title":"Network &amp; Connectivity","text":""},{"location":"TROUBLESHOOTING/#issue-cannot-connect-to-azure-services-locally","title":"Issue: Cannot connect to Azure services locally","text":"<p>Solution: <pre><code># Ensure you're authenticated\naz account show\n\n# If not logged in\naz login --use-device-code\n</code></pre></p>"},{"location":"TROUBLESHOOTING/#issue-timeouts-when-calling-azure-openai","title":"Issue: Timeouts when calling Azure OpenAI","text":"<p>Solution: 1. Check Azure OpenAI resource is deployed and running (Azure Portal) 2. Verify API key or managed identity has access 3. Check network connectivity to Azure</p>"},{"location":"TROUBLESHOOTING/#common-error-messages","title":"Common Error Messages","text":""},{"location":"TROUBLESHOOTING/#modulenotfounderror-no-module-named-azure","title":"\"ModuleNotFoundError: No module named 'azure'\"","text":"<p>Solution: Virtual environment not activated or dependencies not installed <pre><code>source .venv/bin/activate  # or Windows equivalent\npip install -r requirements.txt\n</code></pre></p>"},{"location":"TROUBLESHOOTING/#connectionerror-unable-to-connect-to-cosmos-db","title":"\"ConnectionError: Unable to connect to Cosmos DB\"","text":"<p>Solution: Check connection string in <code>local.settings.json</code> and verify Cosmos DB is provisioned</p>"},{"location":"TROUBLESHOOTING/#authenticationerror-openai-api","title":"\"AuthenticationError: OpenAI API\"","text":"<p>Solution: Verify <code>AZURE_OPENAI_KEY</code> or managed identity credentials in <code>local.settings.json</code></p>"},{"location":"TROUBLESHOOTING/#getting-more-help","title":"Getting More Help","text":"<p>If you're still stuck:</p> <ol> <li>Check Function Logs - Most issues show detailed errors in the terminal where <code>func start</code> is running</li> <li>Check Azure Portal - Verify all resources are created and running</li> <li>Review Generated Settings - Open <code>src/local.settings.json</code> and verify all values are populated</li> <li>GitHub Issues - Search existing issues or create a new one: https://github.com/Azure-Samples/snippy/issues</li> </ol>"},{"location":"TROUBLESHOOTING/#clean-up-if-starting-over","title":"Clean Up (If Starting Over)","text":"<p>If you want to start fresh:</p> <pre><code># Delete Azure resources\nazd down --purge --force\n\n# Delete local environment\nrm -rf .azure\n\n# Delete virtual environment\nrm -rf src/.venv\n\n# Stop Docker containers\ndocker compose down -v\n\n# Start over from Step 1\n</code></pre>"},{"location":"TUTORIAL/","title":"Snippy Tutorial: Building an AI-Enhanced Code Snippet Manager","text":"<p>This tutorial guides you through building Snippy, an intelligent code snippet manager using Azure Functions. You'll save and retrieve code snippets in Azure Cosmos DB with vector search enabled, using Azure OpenAI embeddings to capture semantic meaning. You'll also create AI agents that generate documentation and coding standards from your snippets.</p> <p>The key innovation is exposing your Azure Functions as MCP (Model Context Protocol) Tools that AI assistants like GitHub Copilot can discover and invoke directly.</p> <p>You'll implement both patterns:</p> <ul> <li>Azure Functions as consumable tools for AI agents</li> <li>Azure Functions that create and orchestrate AI agents</li> </ul> <p>This dual approach demonstrates how serverless functions can seamlessly integrate with modern AI workflows through standard protocols.</p> <p></p>"},{"location":"TUTORIAL/#prerequisites","title":"Prerequisites","text":"<p>Before starting this tutorial, ensure you have the following installed and configured on your local machine:</p>"},{"location":"TUTORIAL/#required-software","title":"Required Software","text":"<ul> <li>Visual Studio Code - Your primary development environment</li> <li>Python 3.11 or 3.12</li> <li>uv package manager (faster alternative to pip) - Install with:</li> <li>macOS/Linux: <code>curl -LsSf https://astral.sh/uv/install.sh | sh</code></li> <li>Windows: <code>powershell -c \"irm https://astral.sh/uv/install.ps1 | iex\"</code></li> <li>Git for source control</li> <li>Azure CLI for managing Azure resources - Installation guide</li> <li>Azure Functions Core Tools v4 - Installation guide</li> <li>Azure Developer CLI (azd) - Installation guide</li> <li>Docker Desktop for the Durable Task emulator and Azurite support</li> </ul>"},{"location":"TUTORIAL/#azure-account","title":"Azure Account","text":"<ul> <li>An active Azure subscription with permissions to create resources</li> <li>GitHub account with access to GitHub Copilot</li> </ul>"},{"location":"TUTORIAL/#knowledge-requirements","title":"Knowledge Requirements","text":"<ul> <li>Basic understanding of Python</li> <li>Familiarity with Azure Functions concepts</li> <li>Understanding of REST APIs</li> <li>Basic knowledge of Git and command-line tools</li> </ul>"},{"location":"TUTORIAL/#tutorial-steps","title":"Tutorial Steps","text":"<p>Follow these steps in order to complete the tutorial:</p> <ol> <li>Set Up Azure Resources - Provision Azure infrastructure with Azure Developer CLI</li> <li>Code Review - Understanding MCP Tools and AI Agents - Explore the implementation patterns</li> <li>Local Setup and Installing Python Dependencies - Set up your development environment</li> <li>Verify Local Settings After Provisioning - Confirm configuration is correct</li> <li>Start Docker Compose for Durable Task Support - Run local services for agent state management</li> <li>Run Functions Locally and Test with Cloud Resources - Test the application end-to-end</li> <li>Explore MCP Tools in GitHub Copilot (Local Endpoint) - Connect Copilot to your local functions</li> <li>Test Multi-Agent Orchestration with Durable Task Scheduler - Run complex AI workflows</li> <li>Deploy the Application Code to Azure - Push your code to the cloud</li> <li>Connect VS Code / Copilot to the Cloud MCP Endpoint - Use deployed functions from Copilot</li> <li>Monitor Cloud Orchestration with DTS Dashboard - Observe production workflows</li> <li>Clean Up Azure Resources - Remove resources to avoid charges</li> </ol>"},{"location":"TUTORIAL/#what-youll-build","title":"What You'll Build","text":"<p>By the end of this tutorial, you will have:</p> <ul> <li>Serverless API with Azure Functions for saving/retrieving code snippets</li> <li>Vector Search using Azure OpenAI embeddings and Cosmos DB</li> <li>MCP Tools that GitHub Copilot can discover and use</li> <li>AI Agents that generate documentation and style guides from your code</li> <li>Multi-Agent Orchestration using Durable Functions</li> </ul>"},{"location":"TUTORIAL/#technologies-used","title":"Technologies Used","text":"<ul> <li>Azure Functions (Python v2, Blueprint model)</li> <li>Azure OpenAI (GPT-4o-mini, text-embedding-3-small)</li> <li>Azure Cosmos DB (with vector search)</li> <li>Model Context Protocol (MCP)</li> <li>Microsoft Agent Framework</li> <li>Durable Functions &amp; Durable Task Scheduler</li> </ul> <p>Ready to get started? Head to Step 1: Set Up Azure Resources!</p>"},{"location":"step-01/","title":"Step 1: Set Up Azure Resources","text":"<p>You'll use the Azure Developer CLI (azd) to provision all necessary Azure resources for Snippy. This process takes several minutes (5-10) and will run in the background.</p>"},{"location":"step-01/#11-clone-the-repository","title":"1.1 Clone the Repository","text":"<pre><code>git clone https://github.com/Azure-Samples/snippy.git\ncd snippy\ncode .\n</code></pre> <p>VS Code will open the snippy folder with the source code and assets for the tutorial.</p>"},{"location":"step-01/#12-set-up-github-copilot","title":"1.2 Set Up GitHub Copilot","text":"<p>This tutorial requires GitHub Copilot with access for MCP tool integration.</p> <ol> <li> <p>Verify GitHub Copilot is installed:</p> <ul> <li>In VS Code, check for the GitHub Copilot icon in the Activity Bar (left sidebar)</li> <li>If not installed, install the GitHub Copilot and GitHub Copilot Chat extensions from the VS Code marketplace</li> </ul> </li> <li> <p>Sign in to GitHub Copilot (if not already signed in):</p> <ul> <li>Click the account icon (bottom left) \u2192 Sign in to use GitHub Copilot</li> <li>Follow the prompts to authenticate with your GitHub account</li> <li>Authorize VS Code to access your GitHub account when prompted</li> </ul> </li> <li> <p>Configure the model:</p> <ul> <li>Open the GitHub Copilot Chat window (Ctrl+Alt+I or Cmd+Alt+I)</li> <li>Click the model selector at the top of the chat panel</li> <li>Select Claude Sonnet 4.5 from the available models</li> </ul> </li> </ol>"},{"location":"step-01/#13-provision-azure-resources","title":"1.3 Provision Azure Resources","text":"<p>Now you'll use azd to provision all necessary Azure resources.</p> <ol> <li> <p>Open your terminal inside VS Code (View \u2192 Terminal) and ensure you are in the snippy root directory</p> <p></p> </li> <li> <p>Login to Azure:</p> <pre><code>azd auth login\n</code></pre> <p>Follow the authentication prompts in your browser.</p> </li> <li> <p>Set up the azd Environment:</p> <p>An azd environment stores configuration details like subscription ID and location. Create a new environment with a unique suffix (replace <code>&lt;unique-suffix&gt;</code> with your own identifier, e.g., your initials and a random number like <code>jd4792</code>):</p> <pre><code>azd env new snippymcplab-&lt;unique-suffix&gt; --subscription &lt;your-subscription-id&gt;\n</code></pre> <p>Note: To find your subscription ID, run <code>az account list --output table</code> and use the subscription ID from the output.</p> </li> <li> <p>Set the name suffix for Azure resources:</p> <p>The name suffix will be added at the end of the resources deployed to Azure:</p> <pre><code>azd env set NAME_SUFFIX &lt;unique-suffix&gt;\n</code></pre> </li> <li> <p>Provision and Deploy Resources:</p> <p>Run the following command. This reads the infrastructure definition (infra folder, main.bicep) and begins creating the resources in Azure:</p> <pre><code>azd provision\n</code></pre> <p>If prompted, select a location from the terminal to deploy the Azure resources.</p> <p>Do not wait for it to complete. It will run in the background. Proceed immediately to the next step while it runs.</p> <p>What This Provisions:</p> <ul> <li>Azure Function App (using the scalable Flex Consumption plan)</li> <li>Azure Storage Account (for Functions operations and state)</li> <li>Azure Cosmos DB for NoSQL (pre-configured for vector search)</li> <li>Azure AI Services (with gpt-4o-mini and text-embedding-3-small models deployed)</li> <li>Microsoft Foundry resources (Foundry projects)</li> <li>Azure Log Analytics &amp; Application Insights (for monitoring)</li> <li>Durable Task Scheduler (for workflow orchestration)</li> <li>Managed Identity (for secure access to Azure resources)</li> </ul> <p>Note: These resources are created within a new resource group named rg-snippymcplab-. You will deploy your application code to the Function App later using azd deploy."},{"location":"step-01/#proceed-to-code-review-exercises-while-provisioning-takes-place","title":"Proceed to code review exercises while provisioning takes place","text":"<p>Important: Ensure you can easily access the terminal running azd provision to monitor its progress and verify when it finishes.</p>"},{"location":"step-02/","title":"Step 2: Code Review - Understanding MCP Tools and AI Agents with Azure Functions","text":"<p>As azd provision sets up your cloud resources in the background, you'll explore how Azure Functions power AI-enabled tools and agent orchestration.</p>"},{"location":"step-02/#what-youll-learn","title":"What You'll Learn","text":"<p>Azure Functions provides a serverless platform for building AI-integrated microservices. You'll review two key integration patterns:</p> <ol> <li> <p>Azure Functions as MCP Tools for AI Agents:    See how Azure Functions become discoverable tools for AI agents like GitHub Copilot. The MCP tool trigger makes your function directly usable by any MCP-compatible client without custom integration code.</p> </li> <li> <p>Azure Functions with Durable AI Agents:    Explore how Azure Functions use the agent-framework-azurefunctions library to create durable AI agents. These agents persist state automatically and can use other functions (like vector search) as tools.</p> </li> </ol> <p>Key Azure Technologies:</p> <ul> <li>Azure Functions: Serverless compute for AI tools and agent interactions</li> <li>MCP Tool Trigger (@app.mcp_tool_trigger): Exposes functions as discoverable MCP tools</li> <li>Embeddings Input Binding (@app.embeddings_input): Automatically generates vector embeddings</li> <li>Azure Cosmos DB with Vector Search: Stores snippets and embeddings for semantic retrieval</li> <li>agent-framework-azurefunctions: Enables durable AI agents with automatic state management</li> </ul>"},{"location":"step-02/#21-review-tool-schema-definition","title":"2.1 Review: Tool Schema Definition","text":"<p>Target File: Open src/function_app.py in VS Code</p> <ol> <li> <p>Navigate to the TOOL PROPERTY DEFINITIONS section (around line 65)</p> </li> <li> <p>Examine how tool properties are defined:</p> <pre><code>tool_properties_save_snippets = ToolPropertyList(\n    ToolProperty(_SNIPPET_NAME_PROPERTY_NAME, \"string\", \"A unique name or identifier for the code snippet...\"),\n    ToolProperty(_PROJECT_ID_PROPERTY_NAME, \"string\", \"An identifier for a project to associate this snippet with...\"),\n    ToolProperty(_SNIPPET_PROPERTY_NAME, \"string\", \"The actual code or text content of the snippet...\"),\n)\n</code></pre> <p>What This Does:</p> <ul> <li><code>ToolPropertyList</code> is a helper class that creates a list of tool properties</li> <li>Each <code>ToolProperty</code> defines a parameter with: name, type, and description</li> <li>The descriptions are detailed natural language that helps AI agents understand what each parameter is for</li> <li>Call <code>.to_json()</code> to serialize this schema for the MCP protocol</li> </ul> </li> </ol>"},{"location":"step-02/#22-review-mcp-tool-trigger-binding","title":"2.2 Review: MCP Tool Trigger Binding","text":"<ol> <li> <p>Scroll to the mcp_save_snippet function (around line 174)</p> </li> <li> <p>Examine the MCP tool trigger decorator:</p> <pre><code>@app.mcp_tool_trigger(\n    arg_name=\"context\",\n    tool_name=\"save_snippet\",\n    description=\"Saves a given code snippet. It can take a snippet name, the snippet content, and an optional project ID. Embeddings are generated for the content to enable semantic search. The LLM should provide 'snippetname' and 'snippet' when intending to save.\",\n    tool_properties=tool_properties_save_snippets.to_json(),\n)\n</code></pre> <p>What This Does:</p> <ul> <li>The <code>@app.mcp_tool_trigger</code> decorator registers this function as an MCP tool</li> <li><code>arg_name=\"context\"</code> - the parameter that receives MCP data as a JSON string</li> <li><code>tool_name=\"save_snippet\"</code> - how AI assistants will refer to this tool</li> <li><code>description</code> - explains to the AI what this tool does</li> <li><code>tool_properties</code> - the schema (from section 2.1) serialized as JSON</li> <li>When deployed, Azure Functions automatically exposes an MCP endpoint that AI assistants can discover</li> </ul> </li> </ol>"},{"location":"step-02/#23-review-embeddings-input-binding","title":"2.3 Review: Embeddings Input Binding","text":"<ol> <li> <p>Look at the decorator chain above http_save_snippet (line 104) and mcp_save_snippet (line 180)</p> </li> <li> <p>Examine the embeddings input binding:</p> <p>For HTTP endpoint:</p> <pre><code>@app.embeddings_input(arg_name=\"embeddings\", input=\"{code}\", input_type=\"rawText\", embeddings_model=\"%EMBEDDING_MODEL_DEPLOYMENT_NAME%\")\n</code></pre> <p>For MCP endpoint:</p> <pre><code>@app.embeddings_input(arg_name=\"embeddings\", input=\"{arguments.snippet}\", input_type=\"rawText\", embeddings_model=\"%EMBEDDING_MODEL_DEPLOYMENT_NAME%\")\n</code></pre> <p>What This Does:</p> <ul> <li>This binding automatically calls Azure OpenAI before your function runs</li> <li>It extracts text from the input and generates vector embeddings</li> <li>Notice the path difference:</li> <li>HTTP: <code>{code}</code> references the JSON request body field</li> <li>MCP: <code>{arguments.snippet}</code> references the MCP context structure</li> <li>The resulting embedding is passed to your function as the <code>embeddings</code> parameter</li> <li>Inside the function, you parse the JSON string to extract the vector array</li> </ul> </li> </ol>"},{"location":"step-02/#24-review-durable-ai-agents-with-microsoft-agent-framework","title":"2.4 Review: Durable AI Agents with Microsoft Agent Framework","text":"<p>Target File: Open src/durable_agents.py</p> <p>This application uses the Microsoft Agent Framework with agent-framework-azurefunctions to create stateful AI agents.</p> <ol> <li> <p>Azure OpenAI Chat Client (around line 135):</p> <pre><code># Support both API key and DefaultAzureCredential authentication\nazure_openai_key = os.environ.get(\"AZURE_OPENAI_KEY\")\nif azure_openai_key:\n    # Use API key authentication for local development\n    chat_client = AzureOpenAIChatClient(\n        endpoint=os.environ.get(\"AZURE_OPENAI_ENDPOINT\"),\n        deployment_name=os.environ.get(\"AGENTS_MODEL_DEPLOYMENT_NAME\", \"gpt-4o-mini\"),\n        api_key=azure_openai_key,\n    )\nelse:\n    # Use DefaultAzureCredential for production\n    chat_client = AzureOpenAIChatClient(\n        endpoint=os.environ.get(\"AZURE_OPENAI_ENDPOINT\"),\n        deployment_name=os.environ.get(\"AGENTS_MODEL_DEPLOYMENT_NAME\", \"gpt-4o-mini\"),\n        credential=DefaultAzureCredential(),\n    )\n</code></pre> <p>AzureOpenAIChatClient:</p> <ul> <li>Uses the Azure OpenAI Chat Completions API</li> <li>Supports both API key and managed identity authentication</li> <li>Configured with the model deployment name from environment variables</li> </ul> </li> <li> <p>Agent Definition with ChatAgent (around line 155):</p> <pre><code>deep_wiki_agent = ChatAgent(\n    chat_client=chat_client,\n    name=\"DeepWikiAgent\",\n    instructions=_DEEP_WIKI_SYSTEM_PROMPT,\n    tools=[vector_search.vector_search],\n)\n\ncode_style_agent = ChatAgent(\n    chat_client=chat_client,\n    name=\"CodeStyleAgent\",\n    instructions=_CODE_STYLE_SYSTEM_PROMPT,\n    tools=[vector_search.vector_search],\n)\n</code></pre> <p>ChatAgent (Microsoft Agent Framework):</p> <ul> <li><code>ChatAgent</code> is the core agent abstraction from Microsoft Agent Framework</li> <li><code>chat_client</code> - The AzureOpenAIChatClient that executes the agent</li> <li><code>name</code> - Used for routing and identification</li> <li><code>instructions</code> - The system prompt that defines agent behavior</li> <li><code>tools</code> - List of Python functions the agent can call (e.g., <code>vector_search.vector_search</code>)</li> <li>The framework automatically discovers tool schemas from function signatures and docstrings</li> </ul> </li> <li> <p>AgentFunctionApp (around line 217):</p> <pre><code>app = AgentFunctionApp(\n    agents=agents,\n    enable_health_check=True,\n    enable_http_endpoints=True  # Enable HTTP endpoints for all agents\n)\n</code></pre> <p>Auto-Generated Endpoints:</p> <p><code>AgentFunctionApp</code> extends Azure Functions and automatically creates: - <code>POST /api/agents/DeepWikiAgent/run</code> - Execute the DeepWiki agent - <code>POST /api/agents/CodeStyleAgent/run</code> - Execute the CodeStyle agent - <code>GET /api/agents/DeepWikiAgent/{sessionId}</code> - Get conversation state - <code>GET /api/agents/CodeStyleAgent/{sessionId}</code> - Get conversation state - <code>GET /api/health</code> - Health check endpoint</p> <p>State is automatically persisted using Durable Entities, so conversation history is maintained across calls.</p> </li> <li> <p>Multi-Agent Orchestration (around line 251):</p> <pre><code>@app.orchestration_trigger(context_name=\"context\")\ndef documentation_orchestration(context: DurableOrchestrationContext):\n    \"\"\"Orchestration that chains multiple agent calls.\"\"\"\n\n    # Get the DeepWiki agent wrapper for orchestration use\n    deep_wiki = app.get_agent(context, \"DeepWikiAgent\")\n\n    # First agent call: Generate initial wiki documentation\n    initial_wiki = yield deep_wiki.run(\n        messages=f\"{user_query}. Focus on architecture and key patterns.\"\n    )\n\n    # Second agent call: Refine the wiki with additional details\n    refined_wiki = yield deep_wiki.run(\n        messages=\"Enhance the documentation with more code examples and best practices.\"\n    )\n\n    # Get the CodeStyle agent for generating complementary style guide\n    code_style = app.get_agent(context, \"CodeStyleAgent\")\n\n    # Third agent call: Generate style guide that complements the wiki\n    style_guide = yield code_style.run(\n        messages=\"Generate a style guide that aligns with the patterns discussed in the wiki.\"\n    )\n\n    return {\n        \"wiki\": extract_text(refined_wiki),\n        \"styleGuide\": extract_text(style_guide),\n        \"success\": True\n    }\n</code></pre> <p>Orchestration Pattern:</p> <ul> <li>Use <code>get_agent(context, name)</code> to get an agent wrapper for orchestration</li> <li><code>yield agent.run(...)</code> executes the agent as a Durable Functions activity</li> <li>Sequential calls to the same agent automatically share conversation context</li> <li>Different agents can be coordinated in sequence</li> <li>All state is automatically persisted by Durable Functions</li> </ul> </li> </ol> <p>Key Differences from Direct Azure AI Agents Service:</p> Aspect This Implementation Direct Azure AI Agents Service Agent Class <code>ChatAgent</code> (Microsoft Agent Framework) <code>AIProjectClient.agents.create_agent()</code> Client <code>AzureOpenAIChatClient</code> <code>AIProjectClient</code> Tool Discovery Automatic from Python functions Manual tool definitions State Management Automatic via Durable Entities Manual via threads Lifecycle Simple <code>agent.run()</code> Manual create/run/poll loop HTTP Endpoints Auto-generated by <code>AgentFunctionApp</code> Must build manually Orchestration Built-in via Durable Functions Must implement manually"},{"location":"step-02/#25-review-vector-search-tool","title":"2.5 Review: Vector Search Tool","text":"<p>Target File: Open src/tools/vector_search.py</p> <p>The <code>vector_search</code> function demonstrates how agents use tools. It's a standard Python async function that the agent framework automatically discovers and makes available to agents:</p> <pre><code>async def vector_search(query: str, k: int = 30, project_id: str = \"default-project\") -&gt; str:\n    \"\"\"\n    Performs vector similarity search on code snippets.\n\n    Args:\n        query: The search query text (plain language or code fragment)\n        k: Number of top matches to return\n        project_id: The project ID to scope the search\n\n    Returns:\n        JSON string of matching snippets with their IDs, code, and similarity scores\n    \"\"\"\n</code></pre> <p>How It Works:</p> <ul> <li>Standard Python async function with type hints and docstring</li> <li>Microsoft Agent Framework automatically discovers it from the signature</li> <li>When an agent needs to search snippets, it calls this function</li> <li>Generates embeddings for the query using Azure OpenAI SDK directly</li> <li>Queries Cosmos DB vector index for similar snippets using cosine distance</li> <li>Returns results as JSON string back to the agent</li> </ul> <p>This is part of the RAG (Retrieval-Augmented Generation) pattern: retrieve relevant code snippets, then use them to generate accurate, grounded responses. This enables semantic search where agents can find relevant code even without exact keyword matches.</p>"},{"location":"step-02/#next-steps","title":"Next Steps","text":"<p>You've reviewed the core implementation patterns. In the following sections, you'll:</p> <ol> <li>Run the functions locally to see these patterns in action</li> <li>Test with REST Client and GitHub Copilot</li> <li>Deploy to Azure and connect to the cloud MCP endpoint</li> </ol>"},{"location":"step-03/","title":"Step 3: Local Setup and Installing Python Dependencies","text":"<p>Let's install the Python packages required by the Function App:</p> <ol> <li> <p>Ensure your VS Code terminal is in the src directory of the cloned repository:</p> <pre><code>cd src\n</code></pre> </li> <li> <p>Create a Python virtual environment using uv (this is faster than venv):</p> <p>All platforms:</p> <pre><code>uv venv .venv\n</code></pre> </li> <li> <p>Activate the virtual environment:</p> <p>macOS/Linux:</p> <pre><code>source .venv/bin/activate\n</code></pre> <p>Windows:</p> <pre><code>.venv\\Scripts\\activate\n</code></pre> <p>(Your terminal prompt should now be prefixed with (.venv))</p> </li> <li> <p>Install the required Python packages:</p> <p>All platforms:</p> <pre><code>uv pip install -r requirements.txt\n</code></pre> </li> </ol> <p>Note: We'll start the Functions host after verifying that all required settings are available from the provisioning process.</p>"},{"location":"step-04/","title":"Step 4: Verify Local Settings After Provisioning","text":"<ol> <li> <p>Check the terminal window where you ran azd provision in Step 1. Wait for it to complete successfully.</p> </li> <li> <p>Once provisioning completes, the postProvision hook defined in azure.yaml automatically runs either ./scripts/generate-settings.ps1 (on Windows) or ./scripts/generate-settings.sh (on Linux/macOS).</p> </li> </ol> <p>These scripts generate the necessary settings in your src/local.settings.json file.</p> <ol> <li> <p>Open your src/local.settings.json file in VS Code and verify it now contains populated values.</p> </li> <li> <p>Your src/local.settings.json file should now look similar to this (with your specific resource details, and additional keys):</p> <p></p> </li> <li> <p>Only needed if settings are missing</p> <p>If for any reason the local.settings.json file wasn't properly generated or is missing values, you can manually run the generation script from the repository root:</p> <pre><code># Navigate to repository root if not already there\ncd ..\n./scripts/generate-settings.sh\n</code></pre> </li> <li> <p>Save the file if you made any changes.</p> </li> </ol>"},{"location":"step-05/","title":"Step 5: Start Docker Compose for Durable Task Support","text":"<p>The agent-framework-azurefunctions library leverages the Durable Task emulator to manage agent state locally. Start it using Docker Compose:</p> <ol> <li> <p>Ensure you're in the repository root directory:</p> <pre><code># Navigate to repository root if currently in src/\ncd ..\n</code></pre> </li> <li> <p>Start the Docker Compose services in detached mode:</p> <p>All platforms:</p> <pre><code>docker compose up -d\n</code></pre> <p>If prompted to allow network access, select Allow to continue.</p> <p>This starts the Durable Task emulator container which the agents will use for state persistence.</p> </li> <li> <p>Verify the container is running:</p> <p>All platforms:</p> <pre><code>docker compose ps\n</code></pre> <p>You should see the durable task emulator service running as well as azurite.</p> </li> </ol> <p>Note: The Durable Task emulator provides local state management for AI agents. In production, this would be handled by the Durable Task Scheduler service.</p>"},{"location":"step-06/","title":"Step 6: Run Functions Locally and Test with Cloud Resources","text":"<p>Now that local.settings.json points to your actual Azure resources provisioned by azd and the Durable Task emulator is running, we can start the Function App and perform end-to-end testing.</p> <ol> <li> <p>Authenticate with Azure:</p> <p>For access to Azure resources, you'll need to perform an az login:</p> <p>All platforms:</p> <pre><code>az login\n</code></pre> <p>Follow the authentication prompts in your browser. After successful login, if you have multiple subscriptions, select the appropriate one from the terminal.</p> </li> <li> <p>In the same terminal where you activated the virtual environment in Step 3, ensure you're in the src directory:</p> <pre><code>cd src\n</code></pre> <p>Your terminal prompt should still show (.venv) indicating the virtual environment is active.</p> </li> <li> <p>Start the Azure Functions runtime locally (ensure your venv from Step 3 is still activated):</p> <p>All platforms:</p> <pre><code>func start\n</code></pre> <p>Note: This may take a minute to start.</p> </li> <li> <p>Look for output indicating the Functions host has started successfully. You should see your functions listed, including the HTTP endpoints, the MCP tool trigger functions, and even an orchestration (we'll run this soon), as shown below:</p> <p></p> </li> </ol>"},{"location":"step-06/#61-test-with-rest-client-end-to-end-smoke-test-optional","title":"6.1 Test with REST Client (End-to-End Smoke Test) - Optional","text":"<p>Let's test your implementation using the built-in REST Client:</p> <ol> <li> <p>In VS Code Explorer, open src/tests/test.http. This file contains pre-defined HTTP requests for testing different Snippy endpoints.</p> </li> <li> <p>Find the request block labeled ### Save a new snippet with projectId. Select the small \"Send Request\" link directly above the POST line.</p> <p></p> </li> <li> <p>Check the response panel that appears on the right. You should see a Status 200 OK response with JSON data showing the saved snippet details, confirming that:</p> <ul> <li>Your function successfully processed the request</li> <li>Azure OpenAI generated embeddings for the code</li> <li>The snippet was stored in Cosmos DB with its vector embedding</li> </ul> </li> <li> <p>Now test retrieval: Find the ### Get a snippet by name request block. Modify the snippet name in the URL (/api/snippets/{name}) to match the one you just saved (the default is \"test-snippet\"). Send this request and verify it returns the correct code snippet data.</p> </li> <li> <p>Test a few more operations to ensure everything works:</p> <ul> <li>Save a more complex snippet using the ### Save a complex snippet request</li> <li>Retrieve it using the corresponding GET request</li> <li>Try the AI agent functions by running the ### Generate wiki or ### Generate code style guide requests</li> </ul> </li> <li> <p>For the agent-based functions (wiki and code style guide), note that these may take longer to execute (10-30 seconds) as they involve creating an AI agent that analyzes your saved snippets.</p> </li> </ol> <p>These successful tests confirm that your entire pipeline is working: HTTP endpoints, embedding generation, Cosmos DB vector storage, and AI agent integration.</p>"},{"location":"step-07/","title":"Step 7: Explore MCP Tools in GitHub Copilot (Local Endpoint)","text":"<p>Now, connect GitHub Copilot Chat to your locally running Function App's MCP endpoint to test the tools you implemented.</p> <ol> <li> <p>Verify MCP Server Configuration:</p> <ul> <li>In VS Code, open the .vscode/mcp.json file</li> <li>You should see the local-snippy server already configured</li> <li>If you see a \"Running\" status with tools count (e.g., \"\u2713 Running | Stop | Restart | 5 tools\"), the server is already connected</li> <li> <p>If not connected, select the Start button in the file (appears at the top of the JSON configuration)</p> <p></p> </li> </ul> </li> <li> <p>View MCP Server Logs (optional but helpful):</p> <ul> <li>Open the Command Palette by selecting Ctrl+Shift+P (Windows/Linux) or Cmd+Shift+P (macOS) or View &gt; Command Palette from the toolbar</li> <li>Enter and select <code>MCP: List Servers</code></li> <li>Select the local-snippy server from the dropdown</li> <li>Select Show Output to see the server logs</li> <li>Tip: Select the settings icon next to \"MCP: local-snippy\" in the output panel to change log level to \"trace\" for more detailed logs</li> </ul> </li> <li> <p>Open GitHub Copilot Chat:</p> <ul> <li>Select Ctrl+Alt+I (Windows/Linux) or Cmd+Alt+I (macOS) or select the Copilot Chat icon in the Activity Bar</li> </ul> </li> <li> <p>Configure Copilot Chat for Tools:</p> <ul> <li> <p>Ensure Agent mode is active (select from the dropdown next to the model selector, or Ctrl+. / Cmd+.)</p> <p></p> </li> <li> <p>At the bottom of the chat panel, select the Tools icon</p> <p></p> </li> <li> <p>Make sure MCP Server: local-snippy and all its tools are checked</p> <p></p> </li> <li> <p>Select Escape or select OK to confirm your selection</p> </li> </ul> <p>Troubleshooting MCP Server Connection Issues</p> <p>If you're unable to connect to MCP servers, you may be encountering one of these issues:</p> <p>Issue 1: Cache-related problems</p> <p>To resolve cache issues:</p> <ol> <li>Open VS Code command palette (Ctrl+Shift+P or Cmd+Shift+P).</li> <li>Enter <code>MCP Tools: Reset Cached Tools</code> to execute the command.</li> </ol> <p>Issue 2: Organization policy restrictions</p> <p>If your GitHub Enterprise organization has disabled MCP servers via policies, you have two options:</p> <p>Option A: Use a different GitHub account that isn't subject to the same restrictions</p> <p>Option B: Use the MCP Inspector tool</p> <ol> <li>Run the inspector locally: <code>npx @modelcontextprotocol/inspector</code>.</li> <li>Open your browser and navigate to <code>http://localhost:6274</code>.</li> <li>Test your MCP tools from this local interface.</li> </ol> <p>These workarounds will let you complete the tutorial exercises even if organizational policies restrict direct MCP server access.</p> </li> <li> <p>Test the save_snippet Tool:</p> <ul> <li>Open any code file (e.g., src/durable_agents.py)</li> <li>Select some interesting code sections (or it'll take the entire file as a snippet, which is fine, as well)</li> <li> <p>In Copilot Chat, enter:</p> <pre><code>#local-snippy save this snippet as ai-agents-service-usage\n</code></pre> <p>Press Enter or Send     - If prompted by Copilot to use the save_snippet tool, select Allow</p> <p></p> </li> </ul> </li> <li> <p>Test the get_snippet Tool:</p> <ul> <li> <p>In Copilot Chat, enter:</p> <pre><code>#local-snippy get the snippet named ai-agents-service-usage\n</code></pre> <p>Press Enter or Send - Copilot will suggest using the get_snippet tool - Select Allow</p> <p></p> </li> </ul> </li> <li> <p>Experiment with Advanced AI Agent Tools:</p> <ul> <li> <p>Try these prompts (no need to select code first):</p> <ul> <li> <p><code>generate a deep wiki for all snippets and place in a new file deep-wiki.md in project root</code>   (uses the deep_wiki tool)</p> </li> <li> <p><code>create a code style guide based on the saved snippets and place in a new file code-style.md in project root</code>   (uses the code_style tool)</p> </li> </ul> </li> </ul> <p>Note: These agent-based tools may take a minute to run as they orchestrate with configured tools and have self-reflection</p> <p>Once they are done, open the files and Preview the generated Markdown (Ctrl+K V or Cmd+K V)</p> </li> <li> <p>Check Function Logs:</p> <ul> <li>In the terminal where <code>func start</code> is running, you'll see logs for each tool invocation</li> <li>This confirms your MCP tools are working end-to-end</li> </ul> </li> </ol> <p>The ability to interact with your tools through natural language in Copilot demonstrates the power of the MCP protocol - AI assistants can seamlessly discover and use your Azure Functions without any custom integration code.</p>"},{"location":"step-08/","title":"Step 8: Test Multi-Agent Orchestration with Durable Task Scheduler","text":"<p>Now you'll test the <code>generate_comprehensive_documentation</code> tool, which orchestrates multiple AI agents working together in sequence. This demonstrates how the Durable Task Scheduler manages complex, stateful workflows.</p> <ol> <li> <p>Open the Durable Task Scheduler UI:</p> <ul> <li>In your browser, navigate to <code>http://localhost:8082/</code></li> <li>This is the Durable Task Scheduler's web interface running in the Docker container</li> <li>You'll see the orchestration dashboard where you can monitor workflows in real-time</li> </ul> </li> <li> <p>Trigger the Multi-Agent Orchestration:</p> <ul> <li>In GitHub Copilot Chat (with the local-snippy MCP server active), enter the following prompt:</li> </ul> <pre><code>#local-snippy Generate comprehensive documentation with emphasis on the MCP tools, vector search capabilities and code style. Save in a new file called comprehensive-documentation.md\n</code></pre> <ul> <li>Select Allow when Copilot asks to use the generate_comprehensive_documentation tool</li> </ul> </li> <li> <p>Monitor the Orchestration:</p> <ul> <li>Switch to your browser at <code>http://localhost:8082/</code></li> <li>You should see a new orchestration instance appear in the dashboard</li> <li>Watch as the orchestration progresses through multiple stages:<ul> <li>DeepWiki Agent generates initial documentation</li> <li>DeepWiki Agent refines the documentation with additional details</li> <li>CodeStyle Agent generates a complementary style guide</li> </ul> </li> <li>Each step shows the agent calls, tool invocations, and intermediate results</li> </ul> </li> <li> <p>Check the Function Logs:</p> <ul> <li>In the terminal where <code>func start</code> is running, observe the detailed logs showing:<ul> <li>Orchestration startup</li> <li>Agent invocations (DeepWikiAgent, CodeStyleAgent)</li> <li>Vector search tool calls</li> <li>State persistence operations</li> </ul> </li> </ul> </li> <li> <p>Review the Generated Documentation:</p> <ul> <li>Once the orchestration completes (this may take 1-2 minutes), check your workspace</li> <li>Open comprehensive-documentation.md in the project root</li> <li>The file should contain:<ul> <li>Comprehensive wiki-style documentation generated by DeepWikiAgent</li> <li>Code style guide generated by CodeStyleAgent</li> <li>All focused on MCP tools and vector search capabilities as requested</li> </ul> </li> </ul> </li> <li> <p>Review the Completed Orchestration in the Dashboard:</p> <ul> <li>Return to the Durable Task Scheduler UI at <code>http://localhost:8082/</code></li> <li>Find your completed orchestration instance in the list (it should show Completed status)</li> <li>Click on the orchestration to view its detailed execution history:<ul> <li>Timeline view: See the sequence of all agent calls and their durations</li> <li>Agent outputs: Review the intermediate results from each agent (DeepWiki and CodeStyle)</li> <li>Tool invocations: Examine which vector searches were performed and what snippets were retrieved</li> <li>State transitions: Understand how the orchestration moved through each stage</li> </ul> </li> <li>This detailed view helps you understand how Durable Functions orchestrated the multi-agent workflow and managed state persistence throughout the entire process</li> <li>Notice how each agent call is tracked as a separate activity, allowing you to debug and optimize complex workflows</li> </ul> </li> </ol> <p>What Just Happened:</p> <p>You triggered a complex multi-agent workflow that:</p> <ol> <li>Used an MCP tool (<code>generate_comprehensive_documentation</code>) to start a Durable Functions orchestration</li> <li>The orchestration coordinated two AI agents (DeepWiki and CodeStyle) in sequence</li> <li>Each agent used the <code>vector_search</code> tool to find relevant code snippets</li> <li>The Durable Task Scheduler managed the entire workflow, persisting state between each step</li> <li>Results were combined and saved to a file via Copilot</li> </ol> <p>This demonstrates the power of combining:</p> <ul> <li>MCP protocol for AI assistant integration</li> <li>Durable Functions for workflow orchestration</li> <li>AI Agents for specialized tasks</li> <li>Durable Task Scheduler for local state management</li> </ul>"},{"location":"step-09/","title":"Step 9: Deploy the Application Code to Azure","text":"<p>You've implemented the code and verified it works locally against your provisioned cloud resources. Now, deploy the application code to the Azure Function App created by azd provision.</p> <ol> <li> <p>Go back to the Terminal and stop the local Functions host (View \u2192 Terminal)</p> <p>If it's still running - Ctrl+C (or Cmd+C on macOS) in the func start terminal - wait a few seconds.</p> </li> <li> <p>Ensure your terminal is in the repository root directory (the one containing azure.yaml):</p> <pre><code># Navigate to repository root\ncd ..\n</code></pre> </li> <li> <p>Run the AZD deploy command:</p> <p>All platforms:</p> <pre><code>azd deploy\n</code></pre> <p>Note: This may take a couple minutes to deploy.</p> <p>This command performs the following:</p> <ul> <li>Reads the azure.yaml file to determine which service code to deploy (configured to deploy the src directory to the Function App)</li> <li>Packages your application code</li> <li>Deploys the code to the Azure Function App provisioned earlier</li> <li>Configures the application settings in the deployed Function App based on your .azure/snippy-mcp-lab-/.env file, ensuring it can connect to OpenAI, Cosmos DB, etc., in the cloud <li> <p>Wait for the deployment to complete successfully. AZD will output the endpoints for your deployed application, including the Function App's base URL (e.g., https://func-api-...azurewebsites.net).</p> </li>"},{"location":"step-10/","title":"Step 10: Connect VS Code / Copilot to the Cloud MCP Endpoint","text":"<p>Finally, configure VS Code and Copilot Chat to use the tools running on your deployed Azure Function App.</p> <ol> <li> <p>Get the MCP System Key:</p> <p>The cloud MCP endpoint (/runtime/webhooks/mcp) is protected by a system key. You'll need this key to authenticate calls. Run the following commands in your VS Code terminal to retrieve the system key:</p> <p>macOS/Linux:</p> <pre><code>appName=$(azd env get-value AZURE_FUNCTION_NAME)\naz functionapp keys list -n $appName --query \"systemKeys.mcp_extension\" -g rg-snippymcplab-&lt;unique-suffix&gt; --output tsv\n</code></pre> <p>Windows:</p> <pre><code>$appName = azd env get-value AZURE_FUNCTION_NAME\naz functionapp keys list -n $appName --query \"systemKeys.mcp_extension\" -g rg-snippymcplab-&lt;unique-suffix&gt; --output tsv\n</code></pre> <p>Note: Replace <code>&lt;unique-suffix&gt;</code> with the suffix you chose in Step 1.3.</p> <p>The output will be a long string - copy this value. This is your system-key required for calling the MCP endpoint.</p> </li> <li> <p>Add Cloud Endpoint to .vscode/mcp.json:</p> <p>After retrieving your Function App name and MCP system key, you can now configure the cloud endpoint in .vscode/mcp.json.</p> <p>Stop the local-snippy server if it is still running.</p> <p>Select Start above remote-snippy in mcp.json - this will prompt you to enter: - The Function App name - The MCP system key</p> <p>You don't need to manually replace any values in the JSON - just copy the following values from your Terminal:</p> <p>macOS/Linux:</p> <pre><code># Print the Function App name\necho $appName\n</code></pre> <p>Windows:</p> <pre><code># Print the Function App name\n$appName\n</code></pre> <p>Use the $appName value for the functionapp-name input, and paste the system key you retrieved earlier.</p> <p>This setup allows the cloud-hosted MCP to receive and stream events securely.</p> <p></p> </li> <li> <p>Switch Copilot to Cloud Server:</p> <ul> <li>Open Copilot Chat (Ctrl+Alt+I or Cmd+Alt+I)</li> <li>Ensure Agent mode is selected</li> <li>Verify the tools are loaded correctly</li> </ul> </li> <li> <p>Test Cloud hosted Tools:</p> <p>Repeat the tests from earlier, but this time with the remote-snippy server:</p> <ul> <li>Select some code</li> <li> <p>Ask Copilot:</p> <pre><code>#remote-snippy save the selected snippet as my-cloud-mcp-test\n</code></pre> </li> <li> <p>Confirm the tool usage</p> </li> <li> <p>Ask Copilot:</p> <pre><code>#remote-snippy get the snippet named my-cloud-mcp-test\n</code></pre> </li> <li> <p>Try other tools like deep_wiki as we did earlier</p> </li> </ul> <p>Verify that the tools work correctly by interacting with your deployed Azure Function App.</p> </li> </ol>"},{"location":"step-11/","title":"Step 11: Monitor Cloud Orchestration with DTS Dashboard","text":"<p>Now that the application is deployed to Azure, you can monitor the multi-agent orchestration running in the cloud using the Durable Task Scheduler (DTS) dashboard.</p> <ol> <li> <p>Generate the DTS Dashboard URL:</p> <p>The repository includes helper scripts to generate the DTS dashboard URL. In your VS Code terminal (ensure you're in the repository root directory), run:</p> <pre><code>./scripts/get-dts-dashboard-url.sh\n</code></pre> <p>The script will output a URL similar to:</p> <pre><code>https://dashboard.durabletask.io/subscriptions/{subscription-id}/schedulers/{dts-name}/taskhubs/{taskhub-name}?endpoint={encoded-endpoint}&amp;tenantId={tenant-id}\n</code></pre> </li> <li> <p>Copy and open the dashboard URL:</p> <ul> <li>Copy the entire URL from the terminal output</li> <li>Open it in your browser (you may need to sign in with your Azure credentials)</li> <li>You should see the Durable Task Scheduler dashboard for your deployed application</li> </ul> </li> <li> <p>Trigger a Cloud Orchestration:</p> <p>Back in VS Code, open GitHub Copilot Chat and run the multi-agent orchestration against your deployed function. Use this exact prompt to ensure it calls the comprehensive documentation tool:</p> <pre><code>#remote-snippy use the generate_comprehensive_documentation tool to create documentation and save it in a new file called cloud-documentation.md\n</code></pre> <ul> <li>Select Allow when Copilot asks to use the generate_comprehensive_documentation tool</li> <li>This time the orchestration will run on the Azure Durable Task Scheduler service in the cloud</li> </ul> </li> <li> <p>Monitor the Orchestration in the Dashboard:</p> <ul> <li>Switch to the browser tab with the DTS dashboard</li> <li>You should see a new orchestration instance appear</li> <li>Watch as it progresses through the same stages you saw locally:<ul> <li>DeepWikiAgent initial documentation generation</li> <li>DeepWikiAgent refinement pass</li> <li>CodeStyleAgent style guide generation</li> </ul> </li> <li>Select the orchestration instance to view detailed execution history:<ul> <li>Timeline of agent calls and durations</li> <li>Agent outputs and intermediate results</li> <li>Vector search tool invocations</li> <li>State transitions throughout the workflow</li> </ul> </li> </ul> </li> <li> <p>Review the Generated Documentation:</p> <p>Once the orchestration completes (1-2 minutes), check your workspace:</p> <ul> <li>Open cloud-documentation.md in the project root</li> <li>Compare it with the comprehensive-documentation.md generated during local testing</li> <li>Both files demonstrate the same multi-agent workflow, but one ran locally and one in Azure</li> </ul> </li> </ol> <p>What You've Demonstrated:</p> <p>You've now run the same multi-agent orchestration in two environments:</p> <ul> <li>Local: Using Docker-based Durable Task emulator for development</li> <li>Cloud: Using Azure Durable Task Scheduler for production</li> </ul> <p>The DTS dashboard provides:</p> <ul> <li>Real-time monitoring of orchestration progress</li> <li>Detailed execution history and debugging information</li> <li>Visibility into agent calls, tool invocations, and state management</li> <li>The ability to track and troubleshoot complex multi-agent workflows</li> </ul> <p>This demonstrates how Durable Functions provides a consistent development experience from local to cloud, with enterprise-grade observability for AI agent orchestrations.</p>"},{"location":"step-12/","title":"Step 12: Clean Up Azure Resources","text":"<p>When you are finished with the tutorial, delete the Azure resources created by azd provision.</p> <ol> <li> <p>Open a terminal in VS Code</p> </li> <li> <p>Ensure you are in the repository root directory:</p> <pre><code># Navigate to repository root if needed\ncd ..\n</code></pre> </li> <li> <p>Run the following AZD command:</p> <p>All platforms:</p> <pre><code>azd down --purge --force\n</code></pre> <ul> <li><code>--purge</code> attempts to permanently delete resources like Key Vaults that support soft-delete</li> <li><code>--force</code> skips the confirmation prompt</li> </ul> </li> <li> <p>AZD will list the resources being deleted and remove them from Azure. This will also delete the local AZD environment configuration (.azure folder).</p> <p>Note: This may take around 20 minutes to complete.</p> </li> </ol>"},{"location":"step-12/#conclusion","title":"Conclusion","text":"<p>Congratulations on completing the Snippy tutorial! You've successfully built a powerful, AI-enhanced code snippet manager that demonstrates cutting-edge integration patterns between serverless compute and AI services. Let's recap what you've learned and accomplished:</p>"},{"location":"step-12/#key-technologies-and-concepts-mastered","title":"Key Technologies and Concepts Mastered","text":""},{"location":"step-12/#1-azure-functions-as-an-ai-integration-platform","title":"1. Azure Functions as an AI Integration Platform","text":"<p>You've built a complete serverless application using Azure Functions that serves both as a traditional API and as an MCP tool provider for AI assistants. This demonstrates how Azure Functions provides an ideal foundation for AI-powered applications, offering serverless scalability with minimal infrastructure overhead.</p>"},{"location":"step-12/#2-model-context-protocol-mcp-integration","title":"2. Model Context Protocol (MCP) Integration","text":"<p>You've implemented and deployed MCP tools that enable AI assistants like GitHub Copilot to discover and use your Azure Functions via a standardized protocol. This powerful capability allows any MCP-compatible AI assistant to leverage your tools without custom integration code - they simply connect to the <code>/runtime/webhooks/mcp</code> endpoint and discover available tools automatically.</p>"},{"location":"step-12/#3-vector-embeddings-and-semantic-search","title":"3. Vector Embeddings and Semantic Search","text":"<p>You've explored a complete Retrieval-Augmented Generation (RAG) pattern by:</p> <ul> <li>Using Azure OpenAI's embedding models to convert code snippets into vector representations</li> <li>Leveraging Azure Functions' <code>@app.embeddings_input</code> binding to automatically generate embeddings before your function executes</li> <li>Storing these vectors in Cosmos DB's DiskANN vector index for high-performance similarity search</li> <li>Implementing the <code>vector_search</code> tool that AI agents use to find relevant code snippets semantically</li> </ul>"},{"location":"step-12/#4-ai-agent-framework-integration","title":"4. AI Agent Framework Integration","text":"<p>You've explored how Microsoft Agent Framework enables sophisticated AI agent capabilities:</p> <ul> <li>Using <code>ChatAgent</code> from agent-framework to create specialized agents (DeepWiki and CodeStyle)</li> <li>Integrating <code>AzureOpenAIChatClient</code> to leverage Azure OpenAI's Chat Completions API</li> <li>Providing agents with custom tools like <code>vector_search</code> for enhanced capabilities</li> <li>Managing multi-agent orchestrations with Durable Functions that coordinate sequential agent calls</li> <li>Leveraging Durable Entities for automatic state persistence and conversation history</li> </ul>"},{"location":"step-12/#5-durable-functions-orchestration","title":"5. Durable Functions Orchestration","text":"<p>You've learned how Durable Functions orchestrates complex, stateful workflows:</p> <ul> <li>Creating orchestrations that coordinate multiple AI agents in sequence</li> <li>Using <code>app.get_agent()</code> to access agent wrappers within orchestrations</li> <li>Managing conversation threads across multiple agent calls to maintain context</li> <li>Monitoring orchestration state and progress through the Durable Task Scheduler dashboard</li> </ul>"},{"location":"step-12/#6-dual-interface-architecture","title":"6. Dual-Interface Architecture","text":"<p>You've explored a system that exposes functionality through multiple interfaces:</p> <ul> <li>Traditional HTTP endpoints (<code>@app.route</code>) for standard RESTful API access</li> <li>MCP tools (<code>@app.mcp_tool_trigger</code>) for AI assistant integration</li> <li>Auto-generated agent endpoints (<code>/api/agents/{AgentName}/run</code>) via AgentFunctionApp</li> <li>Orchestration endpoints for triggering complex multi-agent workflows</li> </ul>"},{"location":"step-12/#7-devops-with-azure-developer-cli","title":"7. DevOps with Azure Developer CLI","text":"<p>You've used Azure Developer CLI (azd) to automate the provisioning and deployment of all required resources:</p> <ul> <li>Azure Function App with Flex Consumption Plan for cost-effective serverless compute</li> <li>Azure Cosmos DB with vector search capability using DiskANN indexing</li> <li>Azure OpenAI with embeddings (text-embedding-3-small) and chat models deployed</li> <li>Automated configuration management with post-provision scripts generating local.settings.json</li> </ul>"},{"location":"step-12/#technical-implementation-highlights","title":"Technical Implementation Highlights","text":"<ol> <li> <p>MCP Tool Registration: You implemented the <code>@app.mcp_tool_trigger</code> decorator with <code>ToolPropertyList</code> schema definitions to register Azure Functions as discoverable MCP tools (save_snippet, get_snippet, deep_wiki, code_style, generate_comprehensive_documentation).</p> </li> <li> <p>Automated Vector Embedding: You leveraged the <code>@app.embeddings_input</code> binding with path expressions like <code>{code}</code> and <code>{arguments.snippet}</code> to automatically generate embeddings before your function executes, eliminating manual Azure OpenAI client code.</p> </li> <li> <p>Vector Database Configuration: You explored how Cosmos DB is configured with DiskANN vector search using the <code>VectorEmbedding</code> container policy, enabling fast semantic retrieval with cosine distance similarity.</p> </li> <li> <p>Microsoft Agent Framework Integration: You examined how <code>ChatAgent</code> instances are created with <code>AzureOpenAIChatClient</code>, configured with system prompts and custom tools, and wrapped by <code>AgentFunctionApp</code> for Durable Functions integration with automatic state management.</p> </li> <li> <p>Multi-Agent Orchestration: You implemented the <code>documentation_orchestration</code> function that demonstrates how to coordinate multiple agents (DeepWiki and CodeStyle) in sequence using Durable Functions, sharing context through conversation threads.</p> </li> <li> <p>End-to-End Testing: You tested your implementation through multiple interfaces:</p> <ul> <li>HTTP requests using REST Client extension</li> <li>Local MCP endpoint via GitHub Copilot connected to <code>http://localhost:7071</code></li> <li>Cloud MCP endpoint via GitHub Copilot connected to deployed Azure Function App</li> <li>Durable Task Scheduler dashboard for monitoring orchestrations</li> </ul> </li> </ol>"},{"location":"step-12/#practical-applications-and-next-steps","title":"Practical Applications and Next Steps","text":"<p>The patterns and technologies you've learned in this tutorial have broad applications:</p> <ul> <li>Enhanced Developer Experiences: Create custom MCP tools that extend AI coding assistants with domain-specific knowledge, company APIs, and proprietary workflows</li> <li>Knowledge Management Systems: Build semantic search systems that capture, index, and retrieve organizational knowledge using vector embeddings and RAG patterns</li> <li>AI-Powered Automation: Create specialized AI agents that execute complex workflows using serverless functions as tools, with built-in state management and resilience</li> <li>Multi-Agent Systems: Orchestrate teams of AI agents with different specializations working together on complex tasks</li> <li>Hybrid AI Architectures: Combine the reasoning capabilities of LLMs with the precision and reliability of traditional serverless functions</li> </ul>"},{"location":"step-12/#additional-resources","title":"Additional Resources","text":"<ul> <li>Azure Functions documentation</li> <li>Model Context Protocol specification</li> <li>Azure OpenAI Service documentation</li> <li>Azure Cosmos DB vector search documentation</li> <li>Microsoft Agent Framework documentation</li> <li>Durable Functions documentation</li> </ul> <p>Thank you for completing this tutorial!</p>"}]}