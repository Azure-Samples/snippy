### Snippy Azure Functions API Test Suite
# This file contains HTTP requests for testing the Snippy Azure Functions endpoints using a REST client.
# It demonstrates typical usage scenarios:
# - Saving code snippets (with and without explicit projectId)
# - Retrieving snippets by name
# - Using AI agents to generate wiki documentation and code style guides
# - Multi-agent orchestrations for comprehensive documentation

### Variables
@localEndpoint = http://localhost:7071
@azureEndpoint = https://{your-function-name}.azurewebsites.net
@endpoint = {{localEndpoint}}

### Basic Snippet Operations

### Save a new snippet with projectId
POST {{endpoint}}/api/snippets
Content-Type: application/json

{
    "name": "test-snippet",
    "projectId": "test-project",
    "code": "print('Snippy!')"
}

### Save a new snippet without projectId (will use default)
POST {{endpoint}}/api/snippets
Content-Type: application/json

{
    "name": "test-snippet-default-project",
    "code": "print('Snippy!')"
}

### Get a snippet by name
GET {{endpoint}}/api/snippets/test-snippet

### Complex Snippet Operations

### Save a complex snippet with projectId
POST {{endpoint}}/api/snippets
Content-Type: application/json

{
    "name": "complex-snippet",
    "projectId": "test-project",
    "code": "class Calculator:\n    def __init__(self):\n        self.result = 0\n\n    def add(self, x, y):\n        return x + y\n\n    def subtract(self, x, y):\n        return x - y\n\n    def multiply(self, x, y):\n        return x * y\n\n    def divide(self, x, y):\n        if y == 0:\n            raise ValueError('Cannot divide by zero')\n        return x / y"
}

### Save a complex snippet without projectId
POST {{endpoint}}/api/snippets
Content-Type: application/json

{
    "name": "complex-snippet-default",
    "code": "class Calculator:\n    def __init__(self):\n        self.result = 0\n\n    def add(self, x, y):\n        return x + y\n\n    def subtract(self, x, y):\n        return x - y\n\n    def multiply(self, x, y):\n        return x * y\n\n    def divide(self, x, y):\n        if y == 0:\n            raise ValueError('Cannot divide by zero')\n        return x / y"
}

### Get the complex snippet
GET {{endpoint}}/api/snippets/complex-snippet

### ============================================================================
### Durable Agent Framework Endpoints (agent-framework-azurefunctions)
### ============================================================================
### These endpoints are automatically created by agent-framework-azurefunctions
### and use Durable Entities for stateful agent execution with conversation history

### Health Check - View all registered agents
GET {{endpoint}}/api/health


### Generate wiki
POST {{endpoint}}/api/agents/DeepWikiAgent/run
Content-Type: application/json

{
    "message": "Generate a comprehensive wiki documentation for all code snippets in the project"
}


### Generate code style guide
POST {{endpoint}}/api/agents/CodeStyleAgent/run
Content-Type: application/json

{
    "message": "Generate a comprehensive code style guide based on the code snippets"
}

### Test agent with tool calling (vector search)
POST {{endpoint}}/api/agents/DeepWikiAgent/run
Content-Type: application/json

{
    "message": "Search for code snippets related to 'authentication' and 'error handling', then generate documentation for those patterns"
}

### ============================================================================
### Multi-Agent Orchestration
### ============================================================================
### The documentation orchestration demonstrates concurrent coordination of multiple agents
### using context.task_all() to run DeepWiki and CodeStyle agents in parallel

### Start documentation orchestration with plain text prompt
POST {{endpoint}}/api/orchestration/documentation
Content-Type: text/plain

Generate comprehensive documentation focusing on API patterns and best practices

### Check orchestration status (replace {instanceId} with actual ID from above response)
GET {{endpoint}}/api/orchestration/status/{instanceId}
